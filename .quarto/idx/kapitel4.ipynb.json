{"title":"Schreiben von wiederverwendbarem Code mithilfe von Funktionen","markdown":{"yaml":{"title":"Schreiben von wiederverwendbarem Code mithilfe von Funktionen"},"headingText":"Funktionen erstellen und verwenden","containsRefs":false,"markdown":"\n\n\n\n\nDieses Tutorial ist das vierte in einer Reihe zur Einführung in die Programmierung und Datenanalyse mit der Python-Programmiersprache. Diese Tutorials basieren auf einem praktischen, programmbasierten Ansatz. Der beste Weg, das Material zu erlernen, besteht darin, den Code auszuführen und mit den Beispielen zu experimentieren.\n\n\nDie folgenden Themen werden in diesem Tutorial behandelt:\n\n* [Funktionen erstellen und verwenden](#funktionen-erstellen-verwenden)\n* [Erstellen von Funktionen in Python](#funktionen-erstellen)\n* [Übung - Datenanalyse für die Urlaubsplanung](#uebung)\n\n\n\n<a id='funktionen-erstellen-verwenden'></a>\n\n\n### Grundlagen\n\nEine Funktion ist ein wiederverwendbarer Satz von Anweisungen. Eine Funktion nimmt eine oder mehrere Eingaben entgegen, führt bestimmte Operationen aus und gibt häufig eine Ausgabe zurück. Python bietet viele integrierte Funktionen wie `print` und ermöglicht Ihnen auch die Definition eigener Funktionen.\n\nSie können eine neue Funktion mit dem Keyword `def` definieren.\n\nBeachten Sie die runden Klammern oder Parenthesen `()` und den Doppelpunkt `:` nach dem Namen der Funktion. Beide sind wesentliche Teile der Syntax zur Definition einer Funktion. Der *Körper* der Funktion kann eine oder mehrere Anweisungen enthalten, die ausgeführt werden sollen, wenn die Funktion aufgerufen wird. Ähnlich wie bei bedingten Anweisungen und Schleifen, müssen die Anweisungen durch 4 Leerzeichen eingerückt werden.\n\nDie Anweisungen im Körper einer Funktion werden nicht ausgeführt, wenn eine Funktion definiert wird. Um die Anweisungen auszuführen, müssen wir die Funktion *aufrufen* oder *aktivieren*.\n\n### Funktionsargumente\n\nFunktionen können auch einen oder mehrere Werte als *Eingaben* akzeptieren (auch bekannt als *Argumente* oder *Parameter*). Argumente helfen uns, flexible Funktionen zu schreiben, die dieselbe Operation für verschiedene Werte ausführen können. Darüber hinaus können Funktionen mit dem Keyword `return` auch einen Wert als Ergebnis zurückgeben, der in einer Variablen gespeichert oder in anderen Ausdrücken verwendet werden kann.\n\nHier ist eine Funktion, die die geraden Zahlen aus einer Liste herausfiltert.\n\nKönnen Sie anhand des Codes verstehen, was die Funktion bewirkt? Wenn nicht, versuchen Sie, jede Zeile der Funktion innerhalb einer Codezelle mit einer Liste von Zahlen als `number_list` auszuführen.\n\n<a id='funktionen-erstellen'></a>\n\n## Erstellen von Funktionen in Python\n\nAls Programmierer verbringen Sie den Großteil Ihrer Zeit mit dem Schreiben und Verwenden von Funktionen, und Python bietet viele Funktionen, um Ihre Funktionen leistungsstark und flexibel zu gestalten. Lassen Sie uns einige davon untersuchen, indem wir ein Problem lösen:\n\n> Radha plant den Kauf eines Hauses, das 1.260.000 Dollar kostet. Sie erwägt zwei Optionen zur Finanzierung ihres Kaufs:\n>\n> * Option 1: Sofortige Anzahlung von 300.000 Dollar und einen 8-jährigen Kredit mit einem Zinssatz von 10% pro Jahr (monatlich zusammengesetzt) für den verbleibenden Betrag.\n> * Option 2: Ein 10-jähriger Kredit mit einem Zinssatz von 8% (monatlich zusammengesetzt) für den gesamten Betrag.\n>\n> Beide Kredite müssen in gleichen monatlichen Raten (EMIs) zurückgezahlt werden. Welcher Kredit hat unter den beiden die niedrigere EMI?\n\nDa wir die EMIs für zwei Kreditoptionen vergleichen müssen, könnte es hilfreich sein, eine Funktion zu definieren, die die EMI für einen Kredit berechnet, unter Berücksichtigung von Eingaben wie den Kosten des Hauses, der Anzahlung, der Dauer des Kredits, dem Zinssatz usw. Wir werden diese Funktion Schritt für Schritt aufbauen.\n\nBeginnen wir mit einer einfachen Funktion, die die EMI für die gesamten Kosten des Hauses berechnet, unter der Annahme, dass der Kredit innerhalb eines Jahres zurückgezahlt werden muss und es keine Zinsen oder Anzahlung gibt.\n\n### Lokale Variablen und \"Scope\"\n\nFügen wir ein zweites Argument hinzu, um die Laufzeit des Darlehens in Monaten zu berücksichtigen.\n\nBeachten Sie, dass die innerhalb der Funktion definierte Variable `emi` außerhalb der Funktion nicht zugänglich ist. Das Gleiche gilt für die Parameter `amount` und `duration`. Dies sind alles *lokale Variablen*, die innerhalb des *Geltungsbereichs* der Funktion liegen.\n\n> **Scope**: Der Geltungsbereich bezieht sich auf den Bereich innerhalb des Codes, in dem eine bestimmte Variable sichtbar ist. Jede Funktion (oder Klassendefinition) definiert einen Geltungsbereich innerhalb von Python. Variablen, die in diesem Bereich definiert sind, werden als *lokale Variablen* bezeichnet. Variablen, die überall verfügbar sind, werden als *globale Variablen* bezeichnet. Die Regeln des Geltungsbereichs ermöglichen es Ihnen, die gleichen Variablennamen in verschiedenen Funktionen zu verwenden, ohne Werte von einer zur anderen zu teilen.\n\nWir können nun einen Kredit mit einer Laufzeit von 6 Jahren mit einem Kredit mit einer Laufzeit von 10 Jahren vergleichen (unter der Annahme, dass keine Anzahlung oder Zinsen erfolgt).\n\n### Rückgabewerte\n\nWie zu erwarten ist, ist der EMI für den 6-Jahres-Kredit höher als für den 10-Jahres-Kredit. Im Moment geben wir das Ergebnis aus, aber es wäre besser, es zurückzugeben und die Ergebnisse zum einfacheren Vergleich in Variablen zu speichern. Wir können dies mit der `return`-Anweisung tun\n\n### Optionale Argumente\n\nFügen wir nun ein weiteres Argument hinzu, um die sofortige Anzahlung zu berücksichtigen. Wir machen dies zu einem *optionalen Argument* mit dem Standardwert 0.\n\nAls nächstes fügen wir die Zinsberechnung in die Funktion ein. Hier ist die Formel zur Berechnung des EMI für einen Kredit:\n\n<img src=\"https://i.imgur.com/iKujHGK.png\" style=\"width:240px\">\n\n* `P` ist der Darlehensbetrag (Eng: principal)\n* `n` ist die Anzahl der Monate\n* `r` ist der Zinssatz pro Monat\n\nDie Ableitung dieser Formel würde den Rahmen dieses Tutorials sprengen.\n\nBeachten Sie, dass beim Definieren der Funktion erforderliche Argumente wie `cost`, `duration` und `rate` vor optionalen Argumenten wie `down_payment` stehen müssen.\n\nBerechnen wir den EMI für Option 1\n\nBei der Berechnung des EMI für Option 2 müssen wir das Argument `down_payment` nicht einbeziehen.\n\n### Named arguments\n\nDer Aufruf einer Funktion mit vielen Argumenten kann oft verwirrend sein und ist anfällig für menschliche Fehler. Zur besseren Übersichtlichkeit bietet Python die Möglichkeit, Funktionen mit *named arguments* aufzurufen. Der Funktionsaufruf kann auch in mehrere Zeilen aufgeteilt werden.\n\n### Module und Bibliotheksfunktionen\n\nWir können bereits erkennen, dass die EMI für Option 1 niedriger zu sein scheint als die EMI für Option 2. Es wäre jedoch schön, den Betrag auf volle Dollar aufzurunden, anstatt Ziffern nach dem Dezimalpunkt einzubeziehen. Um dies zu erreichen, könnten wir eine Funktion schreiben, die eine Zahl nehmen und auf die nächste ganze Zahl aufrunden kann (z.B. wird 1,2 auf 2 aufgerundet). Das wäre eine gute Übung zum Ausprobieren!\n\nDa das Aufrunden von Zahlen jedoch eine ziemlich häufige Operation ist, stellt Python dafür eine Funktion bereit (zusammen mit Tausenden von anderen Funktionen) als Teil der [Python-Standardbibliothek](https://docs.python.org/3/library/). Funktionen sind in *Module* organisiert, die importiert werden müssen, um die Funktionen, die sie enthalten, zu nutzen.\n\n> **Module**: Module sind Dateien, die Python-Code enthalten (Variablen, Funktionen, Klassen usw.). Sie bieten eine Möglichkeit, den Code für große Python-Projekte in Dateien und Ordnern zu organisieren. Ein Modul oder eine spezifische Funktion/Klasse/Variable aus einem Modul muss importiert werden, bevor es in einem Python-Skript oder Notebook verwendet werden kann. Dies bietet *Kapselung* (encapsulation) und vermeidet Namenskonflikte zwischen Ihrem Code und einem Modul oder zwischen Modulen.\n\nUm unsere EMI-Beträge aufzurunden, können wir die Funktion `ceil` (kurz für *ceiling*) aus dem `math` Modul verwenden. Lassen Sie uns das Modul importieren und es verwenden, um die Zahl 1,2 aufzurunden.\n\nLassen Sie uns nun die Funktion `math.ceil` innerhalb der Funktion `home_loan_emi` verwenden, um den EMI-Betrag aufzurunden.\n\n> Die Verwendung von Funktionen zum Erstellen anderer Funktionen ist eine großartige Möglichkeit, Code wiederverzuwenden und komplexe Geschäftslogik zu implementieren, während der Code klein, verständlich und überschaubar bleibt. Idealerweise sollte eine Funktion nur eine Sache machen, und nur eine. Wenn Sie feststellen, dass Sie innerhalb einer einzigen Funktion zu viele Dinge tun, sollten Sie in Erwägung ziehen, sie in 2 oder mehr kleinere, unabhängige Funktionen aufzuteilen. Als Faustregel gilt, dass Sie versuchen sollten, Ihre Funktionen auf 10 Zeilen Code oder weniger zu beschränken. Gute Programmierer schreiben immer kleine, einfache und lesbare Funktionen.\n\nVergleichen wir die EMIs und zeigen Sie eine Meldung für die Option mit dem niedrigeren EMI an.\n\n### Funktionen wiederverwenden und verbessern\n\nJetzt wissen wir mit Sicherheit, dass `Option 1` von den beiden Optionen die niedrigere EMI aufweist. Was aber noch besser ist, ist, dass wir jetzt eine praktische Funktion `loan_emi` haben, mit der sich viele andere ähnliche Probleme mit nur wenigen Codezeilen lösen lassen. Versuchen wir es mit ein paar weiteren Problemen.\n\n> F: Shaun zahlt derzeit einen Wohnungsbaukredit für ein Haus zurück, das er vor einigen Jahren gekauft hat. Die Kosten für das Haus betrugen `$800,000`. Shaun leistete eine Anzahlung von `25%` der Kosten und finanzierte den verbleibenden Betrag mit einem 6-Jahres-Darlehen mit einem Zinssatz von `7%` pro Jahr (monatlich verzinst). Shaun kauft jetzt ein Auto im Wert von `$60,000`, das er plant, mit einem 1-jährigen Darlehen mit einem Zinssatz von `12%` pro Jahr zu finanzieren. Beide Kredite werden in EMIs zurückgezahlt. Wie hoch ist die gesamte monatliche Zahlung, die Shaun zur Kreditrückzahlung leistet?\n\nDiese Frage ist nun mit der von uns bereits definierten Funktion `loan_emi` einfach zu lösen.\n\n### Exceptions und `try`-`except`\n\n> F: Wenn Sie sich `100.000 US-Dollar` mit einem 10-jährigen Darlehen mit einem Zinssatz von 9 % pro Jahr leihen, wie hoch ist dann der Gesamtbetrag, den Sie am Ende als Zinsen zahlen?\n\nEine Möglichkeit, dieses Problem zu lösen, besteht darin, die EMIs für zwei Kredite zu vergleichen: einen mit dem angegebenen Zinssatz und einen mit einem Zinssatz von 0 %. Der gezahlte Gesamtzins ist dann einfach die Summe der monatlichen Differenzen über die Laufzeit des Darlehens.\n\nEtwas scheint schief gelaufen zu sein! Wenn man sich die Fehlermeldung oben genau ansieht, sagt Python uns genau, was falsch gelaufen ist. Python *wirft* einen `ZeroDivisionError` mit einer Nachricht, die anzeigt, dass wir versuchen, eine Zahl durch Null zu teilen. Dies ist eine *Exception*, die die weitere Ausführung des Programms stoppt.\n\n> **Exception**: Auch wenn eine Anweisung oder ein Ausdruck syntaktisch korrekt ist, kann er einen Fehler verursachen, wenn versucht wird, ihn auszuführen. Während der Ausführung erkannte Fehler werden Ausnahmen (exceptions) genannt. Exceptions stoppen typischerweise die weitere Ausführung des Programms, es sei denn, sie werden im Programm mit `try`-`except` Anweisungen behandelt.\n\nPython bietet viele built-in Exceptions, die *geworfen* werden, wenn eingebaute Operatoren, Funktionen oder Methoden auf eine falsche Weise verwendet werden ([Link](https://docs.python.org/3/library/exceptions.html#built-in-exceptions)). Sie können auch Ihre eigene benutzerdefinierte Exception definieren, indem Sie die `Exception`-Klasse erweitern (dazu später mehr).\n\nMit den Anweisungen `try` und `except` können Sie eine Ausnahme *behandeln*. Hier ist ein Beispiel:\n\nWenn eine Ausnahme in dem Code innerhalb eines `try` Blocks auftritt, werden die restlichen Anweisungen in dem Block übersprungen und die `except` Anweisung wird ausgeführt. Wenn die Art der geworfenen Ausnahme mit der Art der Ausnahme übereinstimmt, die durch die `except` Anweisung behandelt wird, dann wird der Code innerhalb des `except` Blocks ausgeführt und die Programmausführung kehrt dann zum normalen Ablauf zurück. \n\nSie können auch mehr als einen Typ von Ausnahme mit mehreren `except` Anweisungen behandeln. Erfahren Sie [hier](https://www.w3schools.com/python/python_try_except.asp) mehr über Ausnahmen. \n\nLassen Sie uns die `loan_emi` Funktion erweitern, um `try`-`except` zu verwenden, um das Szenario zu behandeln, in dem der Zinssatz 0% beträgt. Es ist üblich, Änderungen/Erweiterungen an Funktionen im Laufe der Zeit vorzunehmen, wenn neue Szenarien und Anwendungsfälle auftreten. Es macht Funktionen flexibler & leistungsfähiger.\n\nWir können die aktualisierte Funktion `loan_emi` verwenden, um unser Problem zu lösen.\n\n> F: Wenn Sie sich `100.000 US-Dollar` mit einem 10-jährigen Darlehen mit einem Zinssatz von 9 % pro Jahr leihen, wie hoch ist dann der Gesamtbetrag, den Sie am Ende als Zinsen zahlen?\n\n### Funktionen mit Docstrings dokumentieren\n\nMit einem *Docstring* können wir unserer Funktion Dokumentation hinzufügen. Ein Docstring ist einfach ein String, der als erste Anweisung im Funktionskörper erscheint und von der Funktion `help` verwendet wird. Ein guter Docstring beschreibt, was die Funktion tut, und bietet einige Erklärungen zu den Argumenten.\n\nIm obigen docstring haben wir einige zusätzliche Informationen bereitgestellt, dass sowohl die `duration` als auch die `rate` in Monaten gemessen werden. Sie könnten sogar erwägen, die Argumente `duration_months` und `rate_monthly` zu benennen, um jegliche Verwirrung zu vermeiden. Können Sie sich andere Möglichkeiten vorstellen, wie die Funktion verbessert werden kann?\n\n<a id='uebung'></a>\n\n## Übung - Datenanalyse für die Urlaubsplanung\n\nSie planen eine Freizeitreise (Urlaub) und müssen entscheiden, welche Stadt Sie besuchen möchten. Sie haben 4 Städte in die engere Auswahl genommen und die Kosten für den Rückflug, die täglichen Hotelkosten und die wöchentlichen Mietwagenkosten ermittelt (ein Auto muss für ganze Wochen gemietet werden, auch wenn Sie das Auto vor Ende einer Woche zurückgeben).\n\n\n| Stadt | Rückflug (`$`) | Hotel pro Tag (`$`) | Wöchentliche Autovermietung  (`$`) | \n|------|--------------------------|------------------|------------------------|\n| Paris|       200                |       20         |          200           |\n| London|      250                |       30         |          120           |\n| Dubai|       370                |       15         |          80           |\n| Mumbai|      450                |       10         |          70           |         \n\n\nBeantworten Sie die folgenden Fragen anhand der oben genannten Daten:\n\n1. Wenn Sie eine 1-wöchige Reise planen, welche Stadt sollten Sie besuchen, um das wenigste Geld auszugeben?\n2. Wie ändert sich die Antwort auf die vorherige Frage, wenn Sie die Dauer der Reise auf 4 Tage, 10 Tage oder 2 Wochen ändern?\n3. Wenn Ihr Gesamtbudget für die Reise `$1000` beträgt, welche Stadt sollten Sie besuchen, um die Dauer Ihrer Reise zu maximieren? Welche Stadt sollten Sie besuchen, wenn Sie die Dauer minimieren möchten?\n4. Wie ändert sich die Antwort auf die vorherige Frage, wenn Ihr Budget `$600`, `$2000` oder `$1500` beträgt?\n\n*Hinweis: Um diese Fragen zu beantworten, könnte es hilfreich sein, eine Funktion `cost_of_trip` mit relevanten Eingaben wie Flugkosten, Hotelpreis, Mietwagenpreis und Dauer der Reise zu definieren. Die Funktion `math.ceil` könnte nützlich sein, um die Gesamtkosten der Autovermietung zu berechnen.*\n\n## Weiterführende Literatur und Referenzen\n\nHier sind noch einige weitere Themen, die Sie lernen könnten:\n\n* Funktionen mit einer beliebigen Anzahl von Argumenten (`*args` und `**kwargs`)\n* Definition von Funktionen innerhalb von Funktionen (und Closures)\n* Eine Funktion, die sich selbst aufruft (Rekursion)\n* Funktionen, die andere Funktionen als Argumente akzeptieren oder andere Funktionen zurückgeben\n* Funktionen, die andere Funktionen verbessern (Dekorateure)\n\nIm Folgenden finden Sie einige Ressourcen, um mehr über Funktionen in Python zu erfahren:\n\n* [Python Tutorial bei W3Schools](https://www.w3schools.com/python/)\n* [Praktische Python Programmierung](https://dabeaz-course.github.io/practical-python/Notes/Contents.html)\n* [Python offizielle Dokumentation](https://docs.python.org/3/tutorial/index.html)\n","srcMarkdownNoYaml":"\n\n\n\n\nDieses Tutorial ist das vierte in einer Reihe zur Einführung in die Programmierung und Datenanalyse mit der Python-Programmiersprache. Diese Tutorials basieren auf einem praktischen, programmbasierten Ansatz. Der beste Weg, das Material zu erlernen, besteht darin, den Code auszuführen und mit den Beispielen zu experimentieren.\n\n\nDie folgenden Themen werden in diesem Tutorial behandelt:\n\n* [Funktionen erstellen und verwenden](#funktionen-erstellen-verwenden)\n* [Erstellen von Funktionen in Python](#funktionen-erstellen)\n* [Übung - Datenanalyse für die Urlaubsplanung](#uebung)\n\n\n\n<a id='funktionen-erstellen-verwenden'></a>\n\n## Funktionen erstellen und verwenden\n\n### Grundlagen\n\nEine Funktion ist ein wiederverwendbarer Satz von Anweisungen. Eine Funktion nimmt eine oder mehrere Eingaben entgegen, führt bestimmte Operationen aus und gibt häufig eine Ausgabe zurück. Python bietet viele integrierte Funktionen wie `print` und ermöglicht Ihnen auch die Definition eigener Funktionen.\n\nSie können eine neue Funktion mit dem Keyword `def` definieren.\n\nBeachten Sie die runden Klammern oder Parenthesen `()` und den Doppelpunkt `:` nach dem Namen der Funktion. Beide sind wesentliche Teile der Syntax zur Definition einer Funktion. Der *Körper* der Funktion kann eine oder mehrere Anweisungen enthalten, die ausgeführt werden sollen, wenn die Funktion aufgerufen wird. Ähnlich wie bei bedingten Anweisungen und Schleifen, müssen die Anweisungen durch 4 Leerzeichen eingerückt werden.\n\nDie Anweisungen im Körper einer Funktion werden nicht ausgeführt, wenn eine Funktion definiert wird. Um die Anweisungen auszuführen, müssen wir die Funktion *aufrufen* oder *aktivieren*.\n\n### Funktionsargumente\n\nFunktionen können auch einen oder mehrere Werte als *Eingaben* akzeptieren (auch bekannt als *Argumente* oder *Parameter*). Argumente helfen uns, flexible Funktionen zu schreiben, die dieselbe Operation für verschiedene Werte ausführen können. Darüber hinaus können Funktionen mit dem Keyword `return` auch einen Wert als Ergebnis zurückgeben, der in einer Variablen gespeichert oder in anderen Ausdrücken verwendet werden kann.\n\nHier ist eine Funktion, die die geraden Zahlen aus einer Liste herausfiltert.\n\nKönnen Sie anhand des Codes verstehen, was die Funktion bewirkt? Wenn nicht, versuchen Sie, jede Zeile der Funktion innerhalb einer Codezelle mit einer Liste von Zahlen als `number_list` auszuführen.\n\n<a id='funktionen-erstellen'></a>\n\n## Erstellen von Funktionen in Python\n\nAls Programmierer verbringen Sie den Großteil Ihrer Zeit mit dem Schreiben und Verwenden von Funktionen, und Python bietet viele Funktionen, um Ihre Funktionen leistungsstark und flexibel zu gestalten. Lassen Sie uns einige davon untersuchen, indem wir ein Problem lösen:\n\n> Radha plant den Kauf eines Hauses, das 1.260.000 Dollar kostet. Sie erwägt zwei Optionen zur Finanzierung ihres Kaufs:\n>\n> * Option 1: Sofortige Anzahlung von 300.000 Dollar und einen 8-jährigen Kredit mit einem Zinssatz von 10% pro Jahr (monatlich zusammengesetzt) für den verbleibenden Betrag.\n> * Option 2: Ein 10-jähriger Kredit mit einem Zinssatz von 8% (monatlich zusammengesetzt) für den gesamten Betrag.\n>\n> Beide Kredite müssen in gleichen monatlichen Raten (EMIs) zurückgezahlt werden. Welcher Kredit hat unter den beiden die niedrigere EMI?\n\nDa wir die EMIs für zwei Kreditoptionen vergleichen müssen, könnte es hilfreich sein, eine Funktion zu definieren, die die EMI für einen Kredit berechnet, unter Berücksichtigung von Eingaben wie den Kosten des Hauses, der Anzahlung, der Dauer des Kredits, dem Zinssatz usw. Wir werden diese Funktion Schritt für Schritt aufbauen.\n\nBeginnen wir mit einer einfachen Funktion, die die EMI für die gesamten Kosten des Hauses berechnet, unter der Annahme, dass der Kredit innerhalb eines Jahres zurückgezahlt werden muss und es keine Zinsen oder Anzahlung gibt.\n\n### Lokale Variablen und \"Scope\"\n\nFügen wir ein zweites Argument hinzu, um die Laufzeit des Darlehens in Monaten zu berücksichtigen.\n\nBeachten Sie, dass die innerhalb der Funktion definierte Variable `emi` außerhalb der Funktion nicht zugänglich ist. Das Gleiche gilt für die Parameter `amount` und `duration`. Dies sind alles *lokale Variablen*, die innerhalb des *Geltungsbereichs* der Funktion liegen.\n\n> **Scope**: Der Geltungsbereich bezieht sich auf den Bereich innerhalb des Codes, in dem eine bestimmte Variable sichtbar ist. Jede Funktion (oder Klassendefinition) definiert einen Geltungsbereich innerhalb von Python. Variablen, die in diesem Bereich definiert sind, werden als *lokale Variablen* bezeichnet. Variablen, die überall verfügbar sind, werden als *globale Variablen* bezeichnet. Die Regeln des Geltungsbereichs ermöglichen es Ihnen, die gleichen Variablennamen in verschiedenen Funktionen zu verwenden, ohne Werte von einer zur anderen zu teilen.\n\nWir können nun einen Kredit mit einer Laufzeit von 6 Jahren mit einem Kredit mit einer Laufzeit von 10 Jahren vergleichen (unter der Annahme, dass keine Anzahlung oder Zinsen erfolgt).\n\n### Rückgabewerte\n\nWie zu erwarten ist, ist der EMI für den 6-Jahres-Kredit höher als für den 10-Jahres-Kredit. Im Moment geben wir das Ergebnis aus, aber es wäre besser, es zurückzugeben und die Ergebnisse zum einfacheren Vergleich in Variablen zu speichern. Wir können dies mit der `return`-Anweisung tun\n\n### Optionale Argumente\n\nFügen wir nun ein weiteres Argument hinzu, um die sofortige Anzahlung zu berücksichtigen. Wir machen dies zu einem *optionalen Argument* mit dem Standardwert 0.\n\nAls nächstes fügen wir die Zinsberechnung in die Funktion ein. Hier ist die Formel zur Berechnung des EMI für einen Kredit:\n\n<img src=\"https://i.imgur.com/iKujHGK.png\" style=\"width:240px\">\n\n* `P` ist der Darlehensbetrag (Eng: principal)\n* `n` ist die Anzahl der Monate\n* `r` ist der Zinssatz pro Monat\n\nDie Ableitung dieser Formel würde den Rahmen dieses Tutorials sprengen.\n\nBeachten Sie, dass beim Definieren der Funktion erforderliche Argumente wie `cost`, `duration` und `rate` vor optionalen Argumenten wie `down_payment` stehen müssen.\n\nBerechnen wir den EMI für Option 1\n\nBei der Berechnung des EMI für Option 2 müssen wir das Argument `down_payment` nicht einbeziehen.\n\n### Named arguments\n\nDer Aufruf einer Funktion mit vielen Argumenten kann oft verwirrend sein und ist anfällig für menschliche Fehler. Zur besseren Übersichtlichkeit bietet Python die Möglichkeit, Funktionen mit *named arguments* aufzurufen. Der Funktionsaufruf kann auch in mehrere Zeilen aufgeteilt werden.\n\n### Module und Bibliotheksfunktionen\n\nWir können bereits erkennen, dass die EMI für Option 1 niedriger zu sein scheint als die EMI für Option 2. Es wäre jedoch schön, den Betrag auf volle Dollar aufzurunden, anstatt Ziffern nach dem Dezimalpunkt einzubeziehen. Um dies zu erreichen, könnten wir eine Funktion schreiben, die eine Zahl nehmen und auf die nächste ganze Zahl aufrunden kann (z.B. wird 1,2 auf 2 aufgerundet). Das wäre eine gute Übung zum Ausprobieren!\n\nDa das Aufrunden von Zahlen jedoch eine ziemlich häufige Operation ist, stellt Python dafür eine Funktion bereit (zusammen mit Tausenden von anderen Funktionen) als Teil der [Python-Standardbibliothek](https://docs.python.org/3/library/). Funktionen sind in *Module* organisiert, die importiert werden müssen, um die Funktionen, die sie enthalten, zu nutzen.\n\n> **Module**: Module sind Dateien, die Python-Code enthalten (Variablen, Funktionen, Klassen usw.). Sie bieten eine Möglichkeit, den Code für große Python-Projekte in Dateien und Ordnern zu organisieren. Ein Modul oder eine spezifische Funktion/Klasse/Variable aus einem Modul muss importiert werden, bevor es in einem Python-Skript oder Notebook verwendet werden kann. Dies bietet *Kapselung* (encapsulation) und vermeidet Namenskonflikte zwischen Ihrem Code und einem Modul oder zwischen Modulen.\n\nUm unsere EMI-Beträge aufzurunden, können wir die Funktion `ceil` (kurz für *ceiling*) aus dem `math` Modul verwenden. Lassen Sie uns das Modul importieren und es verwenden, um die Zahl 1,2 aufzurunden.\n\nLassen Sie uns nun die Funktion `math.ceil` innerhalb der Funktion `home_loan_emi` verwenden, um den EMI-Betrag aufzurunden.\n\n> Die Verwendung von Funktionen zum Erstellen anderer Funktionen ist eine großartige Möglichkeit, Code wiederverzuwenden und komplexe Geschäftslogik zu implementieren, während der Code klein, verständlich und überschaubar bleibt. Idealerweise sollte eine Funktion nur eine Sache machen, und nur eine. Wenn Sie feststellen, dass Sie innerhalb einer einzigen Funktion zu viele Dinge tun, sollten Sie in Erwägung ziehen, sie in 2 oder mehr kleinere, unabhängige Funktionen aufzuteilen. Als Faustregel gilt, dass Sie versuchen sollten, Ihre Funktionen auf 10 Zeilen Code oder weniger zu beschränken. Gute Programmierer schreiben immer kleine, einfache und lesbare Funktionen.\n\nVergleichen wir die EMIs und zeigen Sie eine Meldung für die Option mit dem niedrigeren EMI an.\n\n### Funktionen wiederverwenden und verbessern\n\nJetzt wissen wir mit Sicherheit, dass `Option 1` von den beiden Optionen die niedrigere EMI aufweist. Was aber noch besser ist, ist, dass wir jetzt eine praktische Funktion `loan_emi` haben, mit der sich viele andere ähnliche Probleme mit nur wenigen Codezeilen lösen lassen. Versuchen wir es mit ein paar weiteren Problemen.\n\n> F: Shaun zahlt derzeit einen Wohnungsbaukredit für ein Haus zurück, das er vor einigen Jahren gekauft hat. Die Kosten für das Haus betrugen `$800,000`. Shaun leistete eine Anzahlung von `25%` der Kosten und finanzierte den verbleibenden Betrag mit einem 6-Jahres-Darlehen mit einem Zinssatz von `7%` pro Jahr (monatlich verzinst). Shaun kauft jetzt ein Auto im Wert von `$60,000`, das er plant, mit einem 1-jährigen Darlehen mit einem Zinssatz von `12%` pro Jahr zu finanzieren. Beide Kredite werden in EMIs zurückgezahlt. Wie hoch ist die gesamte monatliche Zahlung, die Shaun zur Kreditrückzahlung leistet?\n\nDiese Frage ist nun mit der von uns bereits definierten Funktion `loan_emi` einfach zu lösen.\n\n### Exceptions und `try`-`except`\n\n> F: Wenn Sie sich `100.000 US-Dollar` mit einem 10-jährigen Darlehen mit einem Zinssatz von 9 % pro Jahr leihen, wie hoch ist dann der Gesamtbetrag, den Sie am Ende als Zinsen zahlen?\n\nEine Möglichkeit, dieses Problem zu lösen, besteht darin, die EMIs für zwei Kredite zu vergleichen: einen mit dem angegebenen Zinssatz und einen mit einem Zinssatz von 0 %. Der gezahlte Gesamtzins ist dann einfach die Summe der monatlichen Differenzen über die Laufzeit des Darlehens.\n\nEtwas scheint schief gelaufen zu sein! Wenn man sich die Fehlermeldung oben genau ansieht, sagt Python uns genau, was falsch gelaufen ist. Python *wirft* einen `ZeroDivisionError` mit einer Nachricht, die anzeigt, dass wir versuchen, eine Zahl durch Null zu teilen. Dies ist eine *Exception*, die die weitere Ausführung des Programms stoppt.\n\n> **Exception**: Auch wenn eine Anweisung oder ein Ausdruck syntaktisch korrekt ist, kann er einen Fehler verursachen, wenn versucht wird, ihn auszuführen. Während der Ausführung erkannte Fehler werden Ausnahmen (exceptions) genannt. Exceptions stoppen typischerweise die weitere Ausführung des Programms, es sei denn, sie werden im Programm mit `try`-`except` Anweisungen behandelt.\n\nPython bietet viele built-in Exceptions, die *geworfen* werden, wenn eingebaute Operatoren, Funktionen oder Methoden auf eine falsche Weise verwendet werden ([Link](https://docs.python.org/3/library/exceptions.html#built-in-exceptions)). Sie können auch Ihre eigene benutzerdefinierte Exception definieren, indem Sie die `Exception`-Klasse erweitern (dazu später mehr).\n\nMit den Anweisungen `try` und `except` können Sie eine Ausnahme *behandeln*. Hier ist ein Beispiel:\n\nWenn eine Ausnahme in dem Code innerhalb eines `try` Blocks auftritt, werden die restlichen Anweisungen in dem Block übersprungen und die `except` Anweisung wird ausgeführt. Wenn die Art der geworfenen Ausnahme mit der Art der Ausnahme übereinstimmt, die durch die `except` Anweisung behandelt wird, dann wird der Code innerhalb des `except` Blocks ausgeführt und die Programmausführung kehrt dann zum normalen Ablauf zurück. \n\nSie können auch mehr als einen Typ von Ausnahme mit mehreren `except` Anweisungen behandeln. Erfahren Sie [hier](https://www.w3schools.com/python/python_try_except.asp) mehr über Ausnahmen. \n\nLassen Sie uns die `loan_emi` Funktion erweitern, um `try`-`except` zu verwenden, um das Szenario zu behandeln, in dem der Zinssatz 0% beträgt. Es ist üblich, Änderungen/Erweiterungen an Funktionen im Laufe der Zeit vorzunehmen, wenn neue Szenarien und Anwendungsfälle auftreten. Es macht Funktionen flexibler & leistungsfähiger.\n\nWir können die aktualisierte Funktion `loan_emi` verwenden, um unser Problem zu lösen.\n\n> F: Wenn Sie sich `100.000 US-Dollar` mit einem 10-jährigen Darlehen mit einem Zinssatz von 9 % pro Jahr leihen, wie hoch ist dann der Gesamtbetrag, den Sie am Ende als Zinsen zahlen?\n\n### Funktionen mit Docstrings dokumentieren\n\nMit einem *Docstring* können wir unserer Funktion Dokumentation hinzufügen. Ein Docstring ist einfach ein String, der als erste Anweisung im Funktionskörper erscheint und von der Funktion `help` verwendet wird. Ein guter Docstring beschreibt, was die Funktion tut, und bietet einige Erklärungen zu den Argumenten.\n\nIm obigen docstring haben wir einige zusätzliche Informationen bereitgestellt, dass sowohl die `duration` als auch die `rate` in Monaten gemessen werden. Sie könnten sogar erwägen, die Argumente `duration_months` und `rate_monthly` zu benennen, um jegliche Verwirrung zu vermeiden. Können Sie sich andere Möglichkeiten vorstellen, wie die Funktion verbessert werden kann?\n\n<a id='uebung'></a>\n\n## Übung - Datenanalyse für die Urlaubsplanung\n\nSie planen eine Freizeitreise (Urlaub) und müssen entscheiden, welche Stadt Sie besuchen möchten. Sie haben 4 Städte in die engere Auswahl genommen und die Kosten für den Rückflug, die täglichen Hotelkosten und die wöchentlichen Mietwagenkosten ermittelt (ein Auto muss für ganze Wochen gemietet werden, auch wenn Sie das Auto vor Ende einer Woche zurückgeben).\n\n\n| Stadt | Rückflug (`$`) | Hotel pro Tag (`$`) | Wöchentliche Autovermietung  (`$`) | \n|------|--------------------------|------------------|------------------------|\n| Paris|       200                |       20         |          200           |\n| London|      250                |       30         |          120           |\n| Dubai|       370                |       15         |          80           |\n| Mumbai|      450                |       10         |          70           |         \n\n\nBeantworten Sie die folgenden Fragen anhand der oben genannten Daten:\n\n1. Wenn Sie eine 1-wöchige Reise planen, welche Stadt sollten Sie besuchen, um das wenigste Geld auszugeben?\n2. Wie ändert sich die Antwort auf die vorherige Frage, wenn Sie die Dauer der Reise auf 4 Tage, 10 Tage oder 2 Wochen ändern?\n3. Wenn Ihr Gesamtbudget für die Reise `$1000` beträgt, welche Stadt sollten Sie besuchen, um die Dauer Ihrer Reise zu maximieren? Welche Stadt sollten Sie besuchen, wenn Sie die Dauer minimieren möchten?\n4. Wie ändert sich die Antwort auf die vorherige Frage, wenn Ihr Budget `$600`, `$2000` oder `$1500` beträgt?\n\n*Hinweis: Um diese Fragen zu beantworten, könnte es hilfreich sein, eine Funktion `cost_of_trip` mit relevanten Eingaben wie Flugkosten, Hotelpreis, Mietwagenpreis und Dauer der Reise zu definieren. Die Funktion `math.ceil` könnte nützlich sein, um die Gesamtkosten der Autovermietung zu berechnen.*\n\n## Weiterführende Literatur und Referenzen\n\nHier sind noch einige weitere Themen, die Sie lernen könnten:\n\n* Funktionen mit einer beliebigen Anzahl von Argumenten (`*args` und `**kwargs`)\n* Definition von Funktionen innerhalb von Funktionen (und Closures)\n* Eine Funktion, die sich selbst aufruft (Rekursion)\n* Funktionen, die andere Funktionen als Argumente akzeptieren oder andere Funktionen zurückgeben\n* Funktionen, die andere Funktionen verbessern (Dekorateure)\n\nIm Folgenden finden Sie einige Ressourcen, um mehr über Funktionen in Python zu erfahren:\n\n* [Python Tutorial bei W3Schools](https://www.w3schools.com/python/)\n* [Praktische Python Programmierung](https://dabeaz-course.github.io/practical-python/Notes/Contents.html)\n* [Python offizielle Dokumentation](https://docs.python.org/3/tutorial/index.html)\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"number-sections":true,"css":["styles.css"],"output-file":"kapitel4.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","theme":{"light":"flatly","dark":"darkly"},"code-copy":true,"smooth-scroll":true,"title":"Schreiben von wiederverwendbarem Code mithilfe von Funktionen"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}